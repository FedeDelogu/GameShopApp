@using WebAppPlayshphere.DAO
@using Utility
@using WebAppPlayshphere.Models
@model List<Utility.Entity>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <link href="/css/Admin/dashboard.css" rel="stylesheet" />
    <script src="/js/Admin/admin.js"></script>
    <title>Hompage</title>
</head>
<body>
    @{
        // Controllo se c'è un utente loggato
        var utenteLoggatoJson = Context.Session.GetString("UtenteLoggato");
        dynamic admin = string.IsNullOrEmpty(utenteLoggatoJson) ? null : Newtonsoft.Json.JsonConvert.DeserializeObject(utenteLoggatoJson);


        /*SE ADMIN E LOGGATO*/
        @if (admin != null && admin.Ruolo == 0)
        {
            var username = admin.Username;

            <div class="container my-5">
            <div class="row shadow rounded-3">
                <div class="bg-side col-3 py-4 px-0 rounded-start-3">
                    <div class="d-flex flex-column justify-content-center align-items-center" id="sticky-sidebar">
                        <div class="mb-4">
                            <img src="~/img/HellsGames.png" alt="HellsGames" id="logo-dashboard" width="64" height="64">
                        </div>
                        <div class="mb-3 w-100 ps-2">
                            <ul class="dropdown-menu d-block position-relative w-100">
                                <li><h6 class="dropdown-header">Gestione Utenti</h6></li>
                                <li><a id="lista-utenti" class="dropdown-item py-2 rounded-start-2" >Lista degli utenti</a></li>
                                <li><a id="lista-utenti-bannati" class="dropdown-item py-2 rounded-start-2" >Lista degli utenti bannati</a></li>
                            </ul>
                        </div>
                        <div class="mb-3 w-100 ps-2">
                            <ul class="dropdown-menu d-block position-relative w-100">
                                <li><h6 class="dropdown-header">Gestione Prodotti</h6></li>
                                <li><a id="lista-prodotti" class="dropdown-item py-2 rounded-start-2" >Lista dei prodotti</a></li>
                                <li><a id="aggiungi-prodotto" class="dropdown-item py-2 rounded-start-2" >Aggiungi un prodotto</a></li>
                            </ul>
                        </div>
                        <div class="mb-3 w-100 ps-2">
                            <ul class="dropdown-menu d-block position-relative w-100">
                                <li><h6 class="dropdown-header">Gestione Recensioni</h6></li>
                                <li><a id="lista-recensioni" class="dropdown-item py-2 rounded-start-2" >Recensioni approvate</a></li>
                                <li><a id="lista-recensioni-da-approvare" class="dropdown-item py-2 rounded-start-2">Recensioni da approvare</a></li>
                            </ul>
                        </div>
                        <div class="mb-3 w-100 ps-2">
                            <ul class="dropdown-menu d-block position-relative w-100">
                                <li><h6 class="dropdown-header">Amministrazione</h6></li>
                                <li><a class="dropdown-item py-2 rounded-start-2">Chat di supporto</a></li>
                            </ul>
                        </div>
                        <div class="mb-3 w-100 d-flex">
                            <button type="button" onclick="window.location.href='/Utenti/Logout'"
                                    class="btn btn-primary">
                                <i class="fa-solid fa-right-from-bracket me-1"></i>
                                LOGOUT
                            </button>


                        </div>
                    </div>
                </div>
                <div class="col-9 rounded-end-3 main-content  py-4">
                    <div id="content-dashboard" class="container">


                            <div class="text-center">Benvenuto <span style="color: var(--flame); font-weight:bold">@(username)</div>
                            <div class="text-center">Questa è la dashboard amministrativa. Da qui puoi gestire gli utenti registrati, le loro recensioni e la lista dei videogiochi acquistabili.</div>
                   
                    </div>
                </div>
            </div>
            </div>

        } //fine dashbord loggati
        else
        {
            <div class="container vh-100 d-flex flex-column align-items-center justify-content-center">
                <div class="row">
                    <div class="col rounded-3 main-content  py-4">
                        <div id="content-dashboard" class="container d-flex justify-content-center align-items-center flex-column">
                            <div>Non hai i permessi per visualizzare questa pagina. Accedi con un account amministratore!</div>
                            <button class="btn btn-login w-25 mt-3" onclick="window.location.href='/Utenti/Login'">Accedi</button>
                        </div>
                    </div>
                </div>
            </div>
        }
    }
</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<script src="https://kit.fontawesome.com/5101093cd6.js" crossorigin="anonymous"></script>
</html>